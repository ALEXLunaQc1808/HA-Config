---
platform: template
sensors:
  laundry_room_total_energy_usage:
    friendly_name: Laundry Room Daily Energy Usage
    icon_template: mdi:counter
    value_template: >-
      {% set ns = namespace(states=[]) %}
      {% for s in states.sensor %}
        {% if s.object_id.startswith('laundry_room_') and s.object_id.endswith('_energy_total') %}
          {% set ns.states = ns.states + [ s.state | float ] %}
        {% endif %}
      {% endfor %}
      {{ ns.states | sum | round(2) }}
      {% set ns = namespace(states=[]) %}
      {% for s in states.sensor %}
        {% if s.object_id.startswith('living_room_') and s.object_id.endswith('_energy_total') %}
          {% set ns.states = ns.states + [ s.state | float ] %}
        {% endif %}
      {% endfor %}
      {{ ns.states | sum | round(2) }}
#      {{
#      (
#      (states.sensor.laundry_room_washing_machine_plug_energy_total.state | float)
#      )
#      | round(3)
#      }}
    unit_of_measurement: 'kWh'

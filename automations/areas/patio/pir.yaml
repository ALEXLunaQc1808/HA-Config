---
alias: Patio - PIR
initial_state: on
trigger:
  - platform: state
    entity_id: binary_sensor.patio_pir
    to: 'on'
condition:
  condition: and
  conditions:
    - condition: state
      entity_id: sun.sun
      state: below_horizon
    - condition: numeric_state
      entity_id: sensor.illuminance
      below: 1000
    - condition: state
      entity_id: light.patio_light
      state: 'off'
    - condition: or
      conditions:
        - condition: state
          entity_id: alarm_control_panel.home_alarm
          state: 'disarmed'
        - condition: state
          entity_id: alarm_control_panel.home_alarm
          state: 'armed_home'
action:
  - service: light.turn_on
    data:
      entity_id: light.patio_light
      brightness: 10
      rgb_color: [255,255,255]
      transition: 15

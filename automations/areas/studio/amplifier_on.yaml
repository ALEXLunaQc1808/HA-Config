---
alias: Studio - Set Amplifier Input to PC
initial_state: on
trigger:
  - platform: homeassistant
    event: start
  - platform: state
    entity_id: media_player.studio_amplifier
    to: "on"
  - platform: state
    entity_id: media_player.studio_amplifier
    to: "idle"
condition:
  condition: and
  conditions:
    - condition: state
      entity_id: binary_sensor.studio_andrea_computer_ping
      state: "on"
    - condition: template
      value_template: "{{ not is_state_attr('media_player.studio_amplifier', 'source', 'PC') }}"
    - condition: state
      entity_id: media_player.spotify
      state: "idle"
action:
  - service: media_player.select_source
    data:
      entity_id: media_player.studio_amplifier
      source: PC
  - service: media_player.volume_set
    data:
      entity_id: media_player.studio_amplifier
      volume_level: "0.85"

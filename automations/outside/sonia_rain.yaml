---
alias: Outside - Rain - Sonia
initial_state: on
trigger:
  - platform: time
    at: 07:30:00
condition:
  condition: and
  conditions:
   - condition: template
     value_template: "{{ is_state('person.sonia', 'home') }}"
   - condition: numeric_state
     entity_id: sensor.dark_sky_precip_probability
     above: 50
   - condition: state
     entity_id: binary_sensor.workday
     state: 'on'
action:
  - service: notify.html5_sonia
    data_template:
      title: "Rain Alert!"
      message: "Today will probably ({{ states('sensor.dark_sky_precip_probability') }}) rain, get an umbrella!"

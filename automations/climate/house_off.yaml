---
alias: Climate - House - Off
initial_state: 'on'
trigger:
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t1_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t2_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t3_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t4_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t5_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t6_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t7_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t8_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t9_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_workday_t10_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t1_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t2_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t3_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t4_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t5_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t6_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t7_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t8_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t9_end')[0:5] }}"
  - platform: template
    value_template: "{{ states('sensor.time') == states('input_datetime.climate_house_weekend_t10_end')[0:5] }}"
condition:
  condition: and
  conditions:
    - condition: state
      entity_id: input_boolean.climate_house_heating_push
      state: 'off'
    - condition: or
      conditions:
        - condition: and
          conditions:
            - condition: state
              entity_id: group.workday
              state: 'on'
            - condition: or
              conditions:
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t1_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t1_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t1
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t2_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t2_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t2
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t3_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t3_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t3
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t4_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t4_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t4
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t5_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t5_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t5
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t6_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t6_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t6
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t7_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t7_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t7
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t8_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t8_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t8
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t9_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t9_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t9
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_workday_t10_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_workday_t10_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_workday_t10
                      state: 'on'
        - condition: and
          conditions:
            - condition: state
              entity_id: group.workday
              state: 'off'
            - condition: or
              conditions:
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t1_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t1_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t1
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t2_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t2_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t2
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t3_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t3_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t3
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t4_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t4_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t4
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t5_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t5_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t5
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t6_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t6_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t6
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t7_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t7_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t7
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t8_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t8_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t8
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t9_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t9_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t9
                      state: 'on'
                - condition: and
                  conditions:
                    - condition: template
                      value_template: "{{ states('sensor.time') >= states('input_datetime.climate_house_weekend_t10_start')[0:5] }}"
                    - condition: template
                      value_template: "{{ states('sensor.time') < states('input_datetime.climate_house_weekend_t10_end')[0:5] }}"
                    - condition: state
                      entity_id: input_boolean.climate_house_weekend_t10
                      state: 'on'
action:
  - service: climate.turn_off
    data:
      entity_id: climate.house
  - service: homeassistant.turn_off
    entity_id: group.climate_house_active
  - service: input_select.select_option
    data:
      entity_id: input_select.climate_house
      option: "Off"

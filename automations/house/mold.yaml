---
alias: House - Mold Alert
initial_state: on
trigger:
#  - platform: state
#    entity_id: sensor.house_mold_indicator
#    to: 70
#    for:
#      minutes: 5
  - platform: state
    entity_id: sensor.living_room_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.kitchen_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.bedroom_luca_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.bathroom_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.master_bedroom_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.master_bathroom_mold_indicator
    to: 70
    for:
      minutes: 5
  - platform: state
    entity_id: sensor.studio_mold_indicator
    to: 70
    for:
      minutes: 5
action:
  - service: alarm_control_panel.alarm_trigger
    entity_id: alarm_control_panel.home_alarm
  - service: notify.html5_andrea
    data_template:
      title: 'Mold Alert'
      message: >
        Mold alert
        {% if trigger.entity_id == "sensor.living_room_mold_indicator" %}in the Living Room ({{ sensor.living_room_mold_indicator }}%)
        {% if trigger.entity_id == "sensor.kitchen_mold_indicator" %}in the Kitchen Room ({{ sensor.kitchen_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.bedroom_luca_mold_indicator" %}in the Luca's Bedroom ({{ sensor.bedroom_luca_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.bathroom_mold_indicator" %}in the Bathroom ({{ sensor.bathroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.master_bedroom_mold_indicator" %}in the Master Bedroom ({{ sensor.master_bedroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.master_bathroom_mold_indicator" %}in the Master Bedroom ({{ sensor.master_bathroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.studio_mold_indicator" %}in the Studio ({{ sensor.studio_mold_indicator }}%)
        {% else %}from Unknown Sensor
        {% endif %}
  - service: tts.google_translate_say
    data_template:
      entity_id: media_player.studio_google_mini
      message: >
        Mold Alert
        {% if trigger.entity_id == "sensor.living_room_mold_indicator" %}in the Living Room ({{ sensor.living_room_mold_indicator }}%)
        {% if trigger.entity_id == "sensor.kitchen_mold_indicator" %}in the Kitchen Room ({{ sensor.kitchen_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.bedroom_luca_mold_indicator" %}in the Luca's Bedroom ({{ sensor.bedroom_luca_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.bathroom_mold_indicator" %}in the Bathroom ({{ sensor.bathroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.master_bedroom_mold_indicator" %}in the Master Bedroom ({{ sensor.master_bedroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.master_bathroom_mold_indicator" %}in the Master Bedroom ({{ sensor.master_bathroom_mold_indicator }}%)
        {% elif trigger.entity_id == "sensor.studio_mold_indicator" %}in the Studio ({{ sensor.studio_mold_indicator }}%)
        {% else %}from Unknown Sensor
        {% endif %}
      language: 'en'

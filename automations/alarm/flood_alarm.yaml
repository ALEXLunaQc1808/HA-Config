---
alias: Alarm - Flood Alert
initial_state: on
trigger:
  - platform: state
    entity_id: binary_sensor.master_bathroom_sjcgq11lm_leak
    to: 'on'
  - platform: state
    entity_id: binary_sensor.bathroom_sjcgq11lm_leak
    to: 'on'
action:
  - service: mqtt.publish
    data:
      topic: zigbee2mqtt/house_alarm_siren/set
      payload: '{"warning": {"duration": 0, "mode": "stop", "strobe": true}}'
  - service: notify.html5
    data:
      title: ''
      message: >
        Flood detected in the 
        {% if trigger.entity_id == "binary_sensor.master_bathroom_sjcgq11lm_leak" %} Master Bathroom 
        {% elif trigger.entity_id == "binary_sensor.bathroom_sjcgq11lm_leak" %} Bathroom
        {% elif trigger.entity_id == "binary_sensor.kitchen_sjcgq11lm_leak" %} Kitchen
        {% elif trigger.entity_id == "binary_sensor.patio_sjcgq11lm_leak" %} Patio
        {% elif trigger.entity_id == "binary_sensor.garage_sjcgq11lm_leak" %} Garage
        {% else %} Unknown
        {% endif %}
  - service: tts.google_translate_say
    data:
      entity_id: media_player.studio_google_mini
      message: >
        Flood detected in the
        {% if trigger.entity_id == "binary_sensor.master_bathroom_sjcgq11lm_leak" %} Master Bathroom
        {% elif trigger.entity_id == "binary_sensor.bathroom_sjcgq11lm_leak" %} Bathroom
        {% elif trigger.entity_id == "binary_sensor.kitchen_sjcgq11lm_leak" %} Kitchen
        {% elif trigger.entity_id == "binary_sensor.patio_sjcgq11lm_leak" %} Patio
        {% elif trigger.entity_id == "binary_sensor.garage_sjcgq11lm_leak" %} Garage
        {% else %} Unknown
        {% endif %}
      language: 'en'
